{% extends "_camera.jinja" %}
{% block pagesubtitle %}
  Latest
{% endblock pagesubtitle  %}

{% block undertitle %}
  {{ date }}
  <a
    class="button historical"
    {# href="{{ url_for('historical', location=location_name.name, camera_name=camera.name) }}" #}
  >
    Historical<img src="{{ url_for('static', path='images/history-line.svg') }}">
  </a>
{% endblock undertitle %}

{% block breadcrumb %}
  <a href="{{ url_for('home') }}">
    Home
  </a>>
  <a href="{{ url_for('location', location_name=location.name) }}">
    {{ location.title }}
  </a>>
  <p>{{ camera.title }}</p>
{% endblock breadcrumb  %}

{% block content %}
  <div id="per-day-refreshable" class="columns">
    {% include "camera_parts/per-day-refresh.jinja" %}
  </div>

  <section>
    <nav id="per-image-menu" class="channel-menu" role="navigation">
      <h3>Current image channels</h3>
        <ul class="channels flr">
          {% for channel in camera.channels %}
            <li class="channel service"
                id="{{ channel.prefix }}"
                data-dependent-on="{{ channel.service_dependency }}">
              <a  class="button button-large {{ channel.name }}"
                  {# href="{{ url_for('current', location=location.slug, camera=camera.slug, channel=channel.slug) }}" #}
                  target="_blank">
                <div class="heartbeat"></div>
                <span>{{ channel.title }}</span>
              </a>
            </li>
          {% endfor %}
        </ul>
      </nav>
  </section>

  <div class="metadata-status">
    <h4>metadata service:&nbsp;</h4>
    <div class="service" id="{{ camera.metadata_slug }}_metadata">
      <div class="heartbeat"></div>
    </div>
  </div>

    <section id="channel-day-data">
      {# {% include "cameras/data-table-header.jinja" %} #}
    </section>

    <script type="application/json" id="camera_json">
      {{ camera_json|tojson }}
    </script>
{% endblock content %}

{% block footer_scripts %}
  {% if camera.js_entry %}
    {% set cam_js = "assets/" + camera.js_entry + ".js" %}
    <script src='{{ url_for("static", path=cam_js) }}'></script>
  {% endif %}
  {{ super() }}
{% endblock footer_scripts  %}
